---
title: "code"
editor_options: 
  chunk_output_type: console
execute: 
  warning: false
  echo: true
  eval: false
---

# Image modification

```{r}
library(tidyverse)
library(magick)

imgdir <- choose.dir() 
newdir <- choose.dir() 

imgfiles <- list.files(path = imgdir
                       , full.names = T
                       , recursive = T
                       )

movefiles <- imgfiles %>% 
  enframe(name = "num", value = "path") %>% 
  mutate(filename = basename(path)) %>% 
  mutate(across(filename, ~make.names(.))) %>% 
  mutate(newdir = file.path({{newdir}}, filename)) 

walk(movefiles, \(x) {
  
  file.copy(from = movefiles$path, to = movefiles$newdir
            , overwrite = T)
})
```

# Image URL for Label Studio

```{r}
library(tidyverse)

folder <- "images"
repo <- "https://flavjack.github.io/pheno-mashua/"

imgs <- list.files(pattern = "(jpg|jpeg|png|JPG)$"
                   , recursive = T) %>% 
  keep(~grepl(folder, .)) %>% 
  discard(~grepl("docs", .)) %>%
  enframe(name = "num", value = "path") %>% 
  mutate(url = file.path(repo, path))

imgs %>% 
  select(url) %>% 
  write_csv("images4labelstudio.txt", col_names = F)
```
